(this.webpackJsonpexpenses=this.webpackJsonpexpenses||[]).push([[0],{20:function(e,t,n){},25:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n(9),i=n.n(a),c=n(10),r=n(2),o=n(3),l=n(6),d=n(5),u=n(4),p=n(0),h=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"iconFrom",value:function(e){switch(e){case"Groceries":return"local_grocery_store";case"Restaurants":return"local_dining";case"Car":return"directions_car";case"Hobbies":return"local_library";case"Household":return"home";case"Shopping":return"local_mall";case"Health":return"local_hospital";case"Entertainment":return"local_movies";case"Transport":return"directions_bus";case"Bambino":return"face";case"Travel":return"flight";default:return"attach_money"}}},{key:"render",value:function(){return Object(p.jsx)("span",{className:"mdc-list-item__start-detail ".concat(this.props.category),role:"presentation",children:Object(p.jsx)("i",{className:"material-icons","aria-hidden":"true",children:this.iconFrom(this.props.category)})})}}]),n}(s.Component),m=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"formatDate",value:function(e){if(e.includes("-")){var t=e.split("-");return"".concat(t[2],"/").concat(t[1],"/").concat(t[0])}return e}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("li",{className:"mdc-list-item",onClick:function(){return e.props.onSelect(e.props.expense)},children:[Object(p.jsx)(h,{category:this.props.expense.category}),Object(p.jsxs)("span",{className:"mdc-list-item__text",children:[this.props.expense.category,Object(p.jsxs)("span",{className:"mdc-list-item__text__secondary",children:[this.formatDate(this.props.expense.date),this.props.expense.description?" ".concat(this.props.expense.description.replace(/^(.{14}).+/,"$1\u2026")):""]})]}),Object(p.jsxs)("span",{className:"mdc-list-item__end-detail",children:["$",this.props.expense.amount]})]})}}]),n}(s.Component),b=(n(19),n(20),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsx)("ul",{className:"mdc-list mdc-list--two-line mdc-list--avatar-list",children:this.props.expenses.map((function(t){return Object(p.jsx)(m,{expense:t,onSelect:e.props.onSelect},t.id)}))})}}]),n}(s.Component)),j=n(11),x=n(12),g=(n(21),n(22),n(23),n(8),n(24),n(25),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).handleInputChange=function(e){var t=e.target;t.reportValidity(),s.setState({isValid:s.form.checkValidity()}),s.props.onChange(t.name,t.value)},s.handleSubmit=function(e){e.preventDefault(),s.props.onSubmit()},s.initializeDeleteModal=function(e){e&&(s.dialog=new x.MDCDialog(e),s.dialog.listen("MDCDialog:accept",(function(){document.body.className=document.body.className.replace("mdc-dialog-scroll-lock",""),s.props.onDelete(s.props.expense)})))},s.state={isValid:!1},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){document.querySelectorAll(".mdc-textfield").forEach((function(e){new j.MDCTextfield(e)})),void 0===this.props.expense.id&&this.amountInput.focus()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("form",{onSubmit:this.handleSubmit,ref:function(t){e.form=t},noValidate:!0,children:[Object(p.jsx)("aside",{className:"mdc-dialog",ref:this.initializeDeleteModal,children:Object(p.jsxs)("div",{className:"mdc-dialog__surface",children:[Object(p.jsx)("header",{className:"mdc-dialog__header",children:Object(p.jsx)("h2",{className:"mdc-dialog__header__title",children:"Are you sure?"})}),Object(p.jsx)("section",{className:"mdc-dialog__body",children:"Do you really want to delete the expense?"}),Object(p.jsxs)("footer",{className:"mdc-dialog__footer",children:[Object(p.jsx)("button",{type:"button",className:"mdc-button mdc-dialog__footer__button mdc-dialog__footer__button--cancel",children:"Cancel"}),Object(p.jsx)("button",{type:"button",className:"mdc-button mdc-dialog__footer__button mdc-dialog__footer__button--accept",children:"Delete"})]})]})}),Object(p.jsx)("div",{className:"mdc-form-field",children:Object(p.jsxs)("div",{className:"mdc-textfield",children:[Object(p.jsx)("input",{name:"amount",className:"mdc-textfield__input",ref:function(t){e.amountInput=t},value:this.props.expense.amount,onChange:this.handleInputChange,type:"number",step:"0.01",min:"0",required:!0}),Object(p.jsx)("label",{className:"mdc-textfield__label",children:"Amount"})]})}),Object(p.jsx)("div",{className:"mdc-form-field",children:Object(p.jsx)("select",{name:"category",className:"mdc-select",value:this.props.expense.category,onChange:this.handleInputChange,required:!0,children:this.props.categories.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))})}),Object(p.jsx)("div",{className:"mdc-form-field",children:Object(p.jsxs)("div",{className:"mdc-textfield",children:[Object(p.jsx)("input",{name:"description",className:"mdc-textfield__input",value:this.props.expense.description,onChange:this.handleInputChange,type:"text"}),Object(p.jsx)("label",{className:"mdc-textfield__label",children:"Description"})]})}),Object(p.jsx)("div",{className:"mdc-form-field",children:Object(p.jsxs)("div",{className:"mdc-textfield",children:[Object(p.jsx)("input",{name:"date",className:"mdc-textfield__input",value:this.props.expense.date,onChange:this.handleInputChange,type:"date",required:!0}),Object(p.jsx)("label",{className:"mdc-textfield__label",children:"Date"})]})}),Object(p.jsxs)("div",{className:"mdc-form-field mdc-form-submit",children:[Object(p.jsx)("input",{type:"submit",className:"mdc-button",value:this.props.expense.id?"Update":"Add",disabled:!this.state.isValid}),this.props.expense.id&&Object(p.jsx)("input",{type:"button",className:"mdc-button",onClick:function(){return e.dialog.show()},value:"Delete"}),Object(p.jsx)("input",{type:"button",className:"mdc-button",onClick:function(){return e.props.onCancel()},value:"Close"})]})]})}}]),n}(s.Component)),f=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"center",children:Object(p.jsxs)("svg",{width:"80px",height:"80px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(p.jsxs)("circle",{cx:"84",cy:"50",r:"0",fill:"#c0f6d2",children:[Object(p.jsx)("animate",{attributeName:"r",values:"11;0;0;0;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"}),Object(p.jsx)("animate",{attributeName:"cx",values:"84;84;84;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"})]}),Object(p.jsxs)("circle",{cx:"40.0957",cy:"50",r:"11",fill:"#ff7c81",children:[Object(p.jsx)("animate",{attributeName:"r",values:"0;11;11;11;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.5s"}),Object(p.jsx)("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.5s"})]}),Object(p.jsxs)("circle",{cx:"16",cy:"50",r:"7.79567",fill:"#fac090",children:[Object(p.jsx)("animate",{attributeName:"r",values:"0;11;11;11;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.25s"}),Object(p.jsx)("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"-0.25s"})]}),Object(p.jsxs)("circle",{cx:"84",cy:"50",r:"3.20433",fill:"#ffffcb",children:[Object(p.jsx)("animate",{attributeName:"r",values:"0;11;11;11;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"}),Object(p.jsx)("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"})]}),Object(p.jsxs)("circle",{cx:"74.0957",cy:"50",r:"11",fill:"#c0f6d2",children:[Object(p.jsx)("animate",{attributeName:"r",values:"0;0;11;11;11",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"}),Object(p.jsx)("animate",{attributeName:"cx",values:"16;16;16;50;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"1s",repeatCount:"indefinite",begin:"0s"})]})]})})}}]),n}(s.Component),v=n(13),O=(n(26),n(27),n(28),n(29),n(30),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).onKeyPressed=function(t){!0===e.state.signedIn&&(!1===e.state.showExpenseForm?65===t.keyCode&&e.onExpenseNew():27===t.keyCode&&e.handleExpenseCancel())},e.signedInChanged=function(t){e.setState({signedIn:t}),e.state.signedIn&&e.load()},e.handleExpenseSubmit=function(){e.setState({processing:!0,showExpenseForm:!1}),(e.state.expense.id?e.update:e.append).bind(Object(l.a)(e))(e.state.expense).then((function(t){e.snackbar.show({message:"Expense ".concat(e.state.expense.id?"updated":"added","!")}),e.load()}),(function(t){console.error("Something went wrong"),console.error(t),e.setState({loading:!1})}))},e.handleExpenseChange=function(t,n){e.setState({expense:Object.assign({},e.state.expense,Object(c.a)({},t,n))})},e.handleExpenseDelete=function(t){e.setState({processing:!0,showExpenseForm:!1});var n=t.id.substring(10);window.gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e.spreadsheetId,resource:{requests:[{deleteDimension:{range:{sheetId:0,dimension:"ROWS",startIndex:n-1,endIndex:n}}}]}}).then((function(t){e.snackbar.show({message:"Expense deleted!"}),e.load()}),(function(t){console.error("Something went wrong"),console.error(t),e.setState({loading:!1})}))},e.handleExpenseSelect=function(t){e.setState({expense:t,showExpenseForm:!0})},e.handleExpenseCancel=function(){e.setState({showExpenseForm:!1})},e.clientId="786926461864-0898buqt82o34sv9e3k9t2ahr80fv5qb.apps.googleusercontent.com",e.spreadsheetId=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SHEET_ID,e.state={signedIn:void 0,categories:[],expenses:[],processing:!0,expense:{},currentMonth:void 0,previousMonth:void 0,showExpenseForm:!1},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],clientId:e.clientId,scope:"https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive.metadata.readonly"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen(e.signedInChanged),e.signedInChanged(window.gapi.auth2.getAuthInstance().isSignedIn.get())}),(function(e){console.log("google auth failed to initialize"),console.log(e)}))})),document.addEventListener("keyup",this.onKeyPressed.bind(this))}},{key:"onExpenseNew",value:function(){var e=new Date;this.setState({showExpenseForm:!0,expense:{amount:"",description:"",date:"".concat(e.getFullYear(),"-").concat(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,"-").concat(e.getDate()<10?"0"+e.getDate():e.getDate()),category:this.state.categories[0]}})}},{key:"parseExpense",value:function(e,t){return{id:"Expenses!I".concat(t+5),date:e[0],description:e[1],category:e[3],amount:e[2].replace(",","")}}},{key:"formatExpense",value:function(e){return["=DATE(".concat(e.date.substr(0,4),", ").concat(e.date.substr(5,2),", ").concat(e.date.substr(-2),")"),e.description,e.amount,e.category]}},{key:"append",value:function(e){return window.gapi.client.sheets.spreadsheets.values.append({spreadsheetId:this.spreadsheetId,range:"Expenses!I5",valueInputOption:"USER_ENTERED",insertDataOption:"INSERT_ROWS",values:[this.formatExpense(e)]})}},{key:"update",value:function(e){return window.gapi.client.sheets.spreadsheets.values.update({spreadsheetId:this.spreadsheetId,range:e.id,valueInputOption:"USER_ENTERED",values:[this.formatExpense(e)]})}},{key:"load",value:function(){var e=this;window.gapi.client.sheets.spreadsheets.values.batchGet({spreadsheetId:this.spreadsheetId,ranges:["Ticks!A:A","Expenses!I5:L","Expenses!L2"]}).then((function(t){var n=t.result.valueRanges[0].values.map((function(e){return e[0]}));e.setState({categories:n,expenses:(t.result.valueRanges[1].values||[]).map(e.parseExpense).reverse().slice(0,30),processing:!1,currentMonth:t.result.valueRanges[2].values[0][0]})}))}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{children:[Object(p.jsx)("header",{className:"mdc-toolbar mdc-toolbar--fixed",children:Object(p.jsxs)("div",{className:"mdc-toolbar__row",children:[Object(p.jsx)("section",{className:"mdc-toolbar__section mdc-toolbar__section--align-start",children:Object(p.jsx)("span",{className:"mdc-toolbar__title",children:"Expenses"})}),Object(p.jsxs)("section",{className:"mdc-toolbar__section mdc-toolbar__section--align-end",role:"toolbar",children:[!1===this.state.signedIn&&Object(p.jsx)("a",{className:"material-icons mdc-toolbar__icon","aria-label":"Sign in",alt:"Sign in",onClick:function(e){e.preventDefault(),window.gapi.auth2.getAuthInstance().signIn()},children:"perm_identity"}),this.state.signedIn&&Object(p.jsx)("a",{className:"material-icons mdc-toolbar__icon","aria-label":"Sign out",alt:"Sign out",onClick:function(e){e.preventDefault(),window.gapi.auth2.getAuthInstance().signOut()},children:"exit_to_app"})]})]})}),Object(p.jsxs)("div",{className:"toolbar-adjusted-content",children:[void 0===this.state.signedIn&&Object(p.jsx)(f,{}),!1===this.state.signedIn&&Object(p.jsx)("div",{className:"center",children:Object(p.jsx)("button",{className:"mdc-button sign-in","aria-label":"Sign in",onClick:function(){window.gapi.auth2.getAuthInstance().signIn()},children:"Sign In"})}),this.state.signedIn&&this.renderBody()]}),Object(p.jsxs)("div",{ref:function(t){t&&(e.snackbar=new v.MDCSnackbar(t))},className:"mdc-snackbar","aria-live":"assertive","aria-atomic":"true","aria-hidden":"true",children:[Object(p.jsx)("div",{className:"mdc-snackbar__text"}),Object(p.jsx)("div",{className:"mdc-snackbar__action-wrapper",children:Object(p.jsx)("button",{type:"button",className:"mdc-button mdc-snackbar__action-button","aria-hidden":"true"})})]})]})}},{key:"renderBody",value:function(){return this.state.processing?Object(p.jsx)(f,{}):Object(p.jsx)("div",{className:"content",children:this.renderExpenses()})}},{key:"renderExpenses",value:function(){var e=this;return this.state.showExpenseForm?Object(p.jsx)(g,{categories:this.state.categories,expense:this.state.expense,onSubmit:this.handleExpenseSubmit,onCancel:this.handleExpenseCancel,onDelete:this.handleExpenseDelete,onChange:this.handleExpenseChange}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"mdc-card",children:[Object(p.jsxs)("section",{className:"mdc-card__primary",children:[Object(p.jsx)("h2",{className:"mdc-card__subtitle",children:"This month you've spent:"}),Object(p.jsx)("h1",{className:"mdc-card__title mdc-card__title--large center",children:this.state.currentMonth})]}),Object(p.jsxs)("section",{className:"mdc-card__supporting-text",children:["Previous month: ",this.state.previousMonth]})]}),Object(p.jsx)(b,{expenses:this.state.expenses,onSelect:this.handleExpenseSelect}),Object(p.jsx)("button",{onClick:function(){return e.onExpenseNew()},className:"mdc-fab app-fab--absolute material-icons","aria-label":"Add expense",children:Object(p.jsx)("span",{className:"mdc-fab__icon",children:"add"})})]})}}]),n}(s.Component));n(31),n(32);i.a.render(Object(p.jsx)(O,{}),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[33,1,2]]]);
//# sourceMappingURL=main.98966bb4.chunk.js.map